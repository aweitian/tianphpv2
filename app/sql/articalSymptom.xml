<?xml version="1.0" encoding="UTF-8"?>
<articalSymptom>
	<exists>
		SELECT
		  `aid`,
		  `syd`
		FROM `data_artical_sym`
		WHERE `aid` = :aid AND `syd` = :syd
	</exists>
	<add>
		INSERT INTO `data_artical_sym`
	            (`aid`,
	             `syd`)
		VALUES (:aid,
		        :syd);
	</add>
	<rm>
		DELETE
		FROM `data_artical_sym`
		WHERE `aid` = :aid
		    AND `syd` = :syd;
	</rm>
	
	
	<query_on_raw_count>
		SELECT 
			COUNT(`data_artical`.`sid`) as `count`
		FROM `data_attr_data`
		LEFT JOIN `data_attr_data` `p_data_attr_data` 
		ON `data_attr_data`.`pid` = `p_data_attr_data`.`sid`
		RIGHT JOIN `data_artical_sym`
		ON `data_artical_sym`.`syd` =  `data_attr_data`.`sid`    
		LEFT JOIN `data_artical`
		ON `data_artical`.`sid` = `data_artical_sym`.`aid`
	</query_on_raw_count>
	<query_on_raw>
		SELECT 
			`data_artical`.`sid` as `aid`,`data_artical`.`title` as `title`,
			`data_artical`.`date` as `date`,
			`data_attr_data`.`pid` AS `pid`,`p_data_attr_data`.`data` as `pd`,
			`data_attr_data`.`sid` as `mid`,`data_attr_data`.`data` as `md`
		FROM `data_attr_data`
		LEFT JOIN `data_attr_data` `p_data_attr_data` 
		ON `data_attr_data`.`pid` = `p_data_attr_data`.`sid`
		RIGHT JOIN `data_artical_sym`
		ON `data_artical_sym`.`syd` =  `data_attr_data`.`sid`    
		LEFT JOIN `data_artical`
		ON `data_artical`.`sid` = `data_artical_sym`.`aid`
		@WHERECLAUSE
		ORDER BY `aid` ASC
		LIMIT :offset,:length
	</query_on_raw>
	<where_clause_lv0>
		`data_attr_data`.`pid` = :lv0id
	</where_clause_lv0>
	<where_clause_lv1>
		`data_attr_data`.`sid` = :lv1id
	</where_clause_lv1>
	<where_clause_title>
		`data_artical`.`title` like CONCAT('%',:title,'%')
	</where_clause_title>
	
	
	<reldis_homeless>
		<count>
			SELECT COUNT(`data_artical`.`sid`) as `count`
			FROM `data_artical`
			WHERE
			`data_artical`.`sid`
			NOT IN (SELECT `aid` FROM `data_artical_sym`)
		</count>
		<query>
			SELECT `data_artical`.`sid`,`data_artical`.`title`,`data_artical`.`date`
			FROM `data_artical`
			WHERE
			`data_artical`.`sid`
			NOT IN (SELECT `aid` FROM `data_artical_sym`)
			LIMIT :offset,:length 
		</query>
	</reldis_homeless>






</articalSymptom>


