<?xml version="1.0" encoding="UTF-8"?>
<sql>
	<data_channel>
		<getRow>
			SELECT 
				`ch_id`,`ch_val`
			 FROM `data_channel` WHERE `ch_val` = :ch_val
		</getRow>	
		<getRows>
			SELECT 
				`ch_id`,`ch_val`
			 FROM `data_channel` WHERE 1
		</getRows>	
		<insert>
			INSERT INTO `data_channel` (
				`ch_val`
			) VALUES (
				:ch_val
			)
		</insert>
	</data_channel>

	<data_account>
		<getRow>
			SELECT 
			`ac_id`,`ch_id`,`ac_val`
		 FROM `data_account` 
		 WHERE `ch_id` = :ch_id AND `ac_val` = :ac_val
		</getRow>	
		<getRowsByChId>
			SELECT 
				`ac_id`,`ch_id`,`ac_val`
			 FROM `data_account` 
			 WHERE `ch_id` = :ch_id
		</getRowsByChId>
		<insert>
			INSERT INTO `data_account` (
				`ch_id`,`ac_val`
			) VALUES (
				:ch_id,:ac_val
			)
		</insert>
	
	</data_account>
	
	<data_plan>
		<getRow>
			SELECT 
			`pl_id`,`ac_id`,`pl_val`
		 FROM `data_plan` 
				WHERE `ac_id` = :ac_id AND `pl_val` = :pl_val
		</getRow>	
		<getRowsByAccId>
			SELECT 
			`pl_id`,`ac_id`,`pl_val`
		 FROM `data_plan` 
				WHERE `ac_id` = :ac_id
		</getRowsByAccId>
		<insert>
			INSERT INTO `data_plan` (
				`ac_id`,`pl_val`
			) VALUES (
				:ac_id,:pl_val
			)
		</insert>
	
	</data_plan>

	<data_unit>
		<getRow>
			SELECT 
			`un_id`,`pl_id`,`un_val`
		 FROM `data_unit` WHERE `pl_id` = :pl_id AND `un_val` = :un_val
		</getRow>
		<getRowsByPlanId>
			SELECT 
			`un_id`,`pl_id`,`un_val`
		 FROM `data_unit` WHERE `pl_id` = :pl_id
		</getRowsByPlanId>	
		<insert>
			INSERT INTO `data_unit` (
				`pl_id`,`un_val`
			) VALUES (
				:pl_id,:un_val
			)
		</insert>
		<update>
			UPDATE `data_unit` SET 
				`un_code_pc`=:un_code_pc,`un_code_m`=:un_code_m
			 WHERE `un_id`=:un_id
		</update>
	</data_unit>
	
	
	<data_idea>
		<getRow>
			SELECT 
			`id_id`,`un_id`,`title`,`desc1`,`desc2`,`url`
 		FROM `data_idea` 
		WHERE `un_id` = :un_id 
		  AND `title` = :title
		  AND `desc1` = :desc1
		  AND `desc2` = :desc2
		</getRow>	
		<insert>
			INSERT INTO `data_idea` (
				`un_id`,`title`,`desc1`,`desc2`,`url`
			) VALUES (
				:un_id,:title,:desc1,:desc2,:url
			)
		</insert>
		<update>
			UPDATE `data_idea` SET 
				`id_code_pc`=:id_code_pc,`id_code_m`=:id_code_m
			WHERE `id_id`=:id_id
		</update>
	</data_idea>
	
	
	<log_upload_token>
		<getRowByToken>
			SELECT * FROM `log_upload_token` WHERE `token` = :token
		</getRowByToken>
		
		<insert>
			INSERT INTO `log_upload_token` (
				`token`,`cls`,`name`,`cnt`
			) VALUES (
				:token,:cls,:name,:cnt
			)
		</insert>
	
	</log_upload_token>
	
	
	<log_load_token>
		<getRowByToken>
			select * from `log_load_token` where
					`token` = :token order by sid desc limit 0,1
		</getRowByToken>
		
		<insert>
			INSERT INTO `log_load_token` (
				`token`
			) VALUES (
				:token
			)
		</insert>
	
	</log_load_token>
	
	<publ_data>
	
		<insert>
			INSERT INTO `publ_data` (
				`id_id`,`paysum`,`shows`,`clks`,`dev`,`datetime`
			) VALUES (
				:id_id,:paysum,:shows,:clks,:dev,:datetime
			)
			ON DUPLICATE KEY UPDATE 
				`paysum` = `paysum` + :paysum,
				`shows` = `shows` + :shows,
				`clks` = `clks` + :clks
		</insert>
	
	
	</publ_data>
	
	
	<priv_data>
		<insert>
		
			INSERT INTO `prvt_data` (
				`code`,`chat`,`subscribe`,`rcvpayment`,`link`,`kw`,`mark`,`date`
			) VALUES (
				:code,:chat,:subscribe,:rcvpayment,:link,:kw,:mark,:date
			)
		
		
		</insert>
	
	
	</priv_data>
	
	
	
	
	
	
	
	
	
</sql>