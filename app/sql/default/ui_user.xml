<?xml version="1.0" encoding="UTF-8"?>
<ui_user>
	<reg_normal>
		INSERT INTO `data_user`
	            (
	             `email`,
	             `name`,
	             `pwd`,
	             `rpq`,
	             `rpa`
		) VALUES (
		        :email,
		        :name,
		        :pwd,
		        :rpq,
		        :rpa
		);
	</reg_normal>
	<reg_normal_noeml>
		INSERT INTO `data_user`
		(
	             `name`,
	             `pwd`,
	             `rpq`,
	             `rpa`
		) VALUES (
		        :name,
		        :pwd,
		        :rpq,
		        :rpa
		);
	</reg_normal_noeml>
	
	
	<reset_pwd>
		<name>
			UPDATE `data_user`
				SET
				  `pwd` = :pwd
				WHERE `name` = :name AND `rpq` = :rpq AND `rpa` = :rpa;
		</name>
		<email>
			UPDATE `data_user`
				SET
				  `pwd` = :pwd
				WHERE `email` = :email AND `rpq` = :rpq AND `rpa` = :rpa;
		</email>
		<phone>
			UPDATE `data_user`
				SET
				  `pwd` = :pwd
				WHERE `phone` = :phone AND `rpq` = :rpq AND `rpa` = :rpa;
		</phone>
		
	</reset_pwd>
	

	<profile>
		<base>
			UPDATE `data_user`
				SET
				  `name` = :name,
				  @nep
				  `rpq` = :rpq,
				  `rpa` = :rpa
				WHERE `sid` = :uid;
		</base>
	
		<avatar>
			UPDATE `data_user`
				SET
				  `avatar` = :avatar
				WHERE `sid` = :uid
		</avatar>
		
		<pwd>
			UPDATE `data_user`
				SET 
				  `pwd` = :newpwd
				WHERE `sid` = :uid AND `pwd` = :oldpwd;
		</pwd>
	</profile>















	<!-- 获取信息 -->
	<!-- 参数:uid -->
	<!-- 返回字段:sid,email,name,phone,avatar,rpq,rpa,wa,date -->
	<row_uid>
		SELECT
		  `sid`,
		  `email`,
		  `name`,
		  `pwd`,
		  `phone`,
		  `avatar`,
		  `rpq`,
		  `rpa`,
		  `wa`,
		  `date`
		FROM `data_user`
		WHERE `sid` = :uid
	</row_uid>

	<waterarm>
		SELECT
		  `sid`,
		  `email`,
		  `name`,
		  `pwd`,
		  `phone`,
		  `avatar`,
		  `rpq`,
		  `rpa`,
		  `wa`,
		  `date`
		FROM `data_user`
		WHERE `wa` = 'y'
	</waterarm>
	
	<cnt>
		SELECT count(`sid`) as `cnt`
		FROM `data_user`
	</cnt>
	
	
	<row_eml_pwd>
		SELECT
		  `sid`
		FROM `data_user`
		WHERE 
			`email` = :email AND `pwd` = :pwd AND `email` IS NOT NULL
	</row_eml_pwd>
	
	<row_name_pwd>
		SELECT
		  `sid`
		FROM `data_user`
		WHERE `name` = :name AND `pwd` = :pwd AND `name` IS NOT NULL
	</row_name_pwd>
	
	
	<row_phone_pwd>
		SELECT
		  `sid`
		FROM `data_user`
		WHERE `phone` = :phone AND `pwd` = :pwd AND `phone` IS NOT NULL
	</row_phone_pwd>
	
	
</ui_user>