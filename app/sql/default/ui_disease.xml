<?xml version="1.0" encoding="UTF-8"?>
<ui_disease>
	<!-- sid,key,data,pid,grp,metaid  -->
	<all>
	 	SELECT 
	 		`data_attr_data`.`sid`,
	 		`data_attr_data`.`key`,
	 		`data_attr_data`.`data`,
	 		`data_attr_data`.`pid`,
	 		`data_attr_data`.`metaid`
	 		FROM `data_attr_data`
			WHERE `grp` = 1;		
	</all>
	<tree2table>
	 	SELECT 
			`data_attr_data`.`pid` as `pid`,`p_data_attr_data`.`data` as `pd`,
			`data_attr_data`.`sid` as `mid`,`data_attr_data`.`data` as `md`,
			`data_attr_data`.`key` as `url`
		    FROM `data_attr_data`
		    LEFT JOIN `data_attr_data` `p_data_attr_data` 
		    	ON `data_attr_data`.`pid` = `p_data_attr_data`.`sid`
		     WHERE `data_attr_data`.`metaid` = 2 AND `data_attr_data`.`grp` = 1;		
	</tree2table>

	<!-- 
	<rowBySid>
		SELECT `data_attr_data`.`key`,
		`data_attr_data`.`data`,
		`data_attr_data`.`pid`
		FROM `data_attr_data`
		WHERE `grp` = 1
		AND
		`sid` = :did
	</rowBySid>
 	-->

	<!-- 
	<lv0Infoes>
		SELECT 
			`data_attr_data`.`sid`,
			`data_attr_data`.`key`,
			`data_attr_data`.`data`
			FROM `data_attr_data`
			WHERE `grp` = 1
			AND `pid` = 0
	</lv0Infoes>
	 -->	
	
	<!-- 根据疾病ID获取症状ID -->
	<symptoms_did>
		SELECT `syd` FROM `data_symptom_disease`
			WHERE `did` = :did
	</symptoms_did>	
		
		

	<!-- 获取DISEASE ROW INFO BY URL KEY -->
	<!-- 
	<row_disease_url>
		SELECT * FROM `data_attr_data`
		WHERE 
		`key` = :key AND
		`data_attr_data`.`grp` = 1;	
	</row_disease_url>
	 -->
	 
	<!-- 根据病种Id获取疾病知识的文章 -->
	<ArticleTag7>
		<!-- 两条SQL返回结果一样，数据量达到一定程度时，BAK的效率可能更好 -->
		<bak>
			SELECT 
			`data_article`.sid,
			`data_article`.`thumb`,`data_article`.`title`,`data_article`.`desc`
			FROM (SELECT `data_article_tags`.`aid`,`data_article_tags`.`tid` FROM `data_article_tags` 
			WHERE `data_article_tags`.`tid` = 7) AS `data_article_tags`
			LEFT JOIN data_article_dis ON `data_article_tags`.`aid` = `data_article_dis`.`aid`
			LEFT JOIN `data_article` ON `data_article_tags`.`aid` = `data_article`.`sid`
			WHERE  `data_article_dis`.`did` = :did		
		</bak>
		<main>
			SELECT 
				`data_article`.sid,
				`data_article`.`thumb`,`data_article`.`title`,`data_article`.`desc`
				 FROM `data_article_tags` 
				LEFT JOIN data_article_dis ON `data_article_tags`.`aid` = `data_article_dis`.`aid`
				LEFT JOIN `data_article` ON `data_article_tags`.`aid` = `data_article`.`sid`
				WHERE `data_article_tags`.`tid` = 7
				AND `data_article_dis`.`did` = :did
		</main>
	</ArticleTag7>
</ui_disease>