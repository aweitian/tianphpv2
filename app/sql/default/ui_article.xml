<?xml version="1.0" encoding="UTF-8"?>
<ui_article>
	<!-- 获取最新的文章 -->
	<!-- 参数:length -->
	<!-- 返回字段:aid,kw,desc,thumb,title,date -->
	<all>
		SELECT
			  `sid` as `aid`,
			  `kw`,
			  `desc`,
			  `thumb`,
			  `title`,
			  `date`
			FROM `data_article`
			ORDER BY `sid` DESC
			LIMIT 0, :length;
	</all>
	
	<!-- 获取某病种下最新的文章 -->
	<!-- 参数:did,offset,length -->
	<!-- 返回字段:aid -->
	<all_bydid>
		SELECT
			  `aid`
			FROM `data_article_dis`
			WHERE `did` = :did
			ORDER BY `sid` DESC
			LIMIT :offset, :length;
	</all_bydid>
	
	<!-- 获取第一个写这篇文章的医生ID -->
	<!-- 参数:aid -->
	<!-- 返回字段:dod -->
	<first_author_byaid>
		SELECT `dod`
			FROM `data_article_doc`
			WHERE `aid`=:aid
			LIMIT 0, 1
	</first_author_byaid>
	
	<!-- 获取与症状ID相关的第一篇文章的ID -->
	<!-- 参数:syd -->
	<!-- 返回字段:aid -->
	<first_aid_bysyd>
		SELECT `aid` FROM `data_article_sym`
			WHERE syd = :syd LIMIT 0,1
	</first_aid_bysyd>
	
	
	<!-- 获取疾病知识文章带内容 -->
	<!-- 参数:did,length -->
	<!-- 返回字段:aid -->
	<allKnowledge>
		<![CDATA[
			SELECT `data_article_dis`.`aid` FROM `data_article_dis`
			WHERE `data_article_dis`.`aid` IN (
				SELECT `aid` FROM `data_article_tags` WHERE `data_article_tags`.`tid` < 7
			) AND `data_article_dis`.`did` = :did
			LIMIT :offset,:length
		]]>
	</allKnowledge>
	
	
	<!-- 获取疾病知识某一类文章ID -->
	<!-- 参数:did,tid,length -->
	<!-- 返回字段:aid -->
	<knowledge_kind>
		SELECT `data_article_dis`.`aid` FROM `data_article_dis`
		WHERE `data_article_dis`.`aid` IN (
			SELECT `aid` FROM `data_article_tags` WHERE `data_article_tags`.`tid` = :tid
		) AND `data_article_dis`.`did` = :did
		LIMIT :offset,:length
	</knowledge_kind>
	
	<!-- 获取一篇文章信息，带内容 -->
	<!-- 参数:aid -->
	<!-- 返回字段:aid,kw,desc,thumb,title,content,date -->
	<row>
		SELECT
		  `sid`,
		  `kw`,
		  `desc`,
		  `thumb`,
		  `title`,
		  `content`,
		  `date`
		FROM `data_article`
		WHERE `data_article`.`sid` = :aid
	</row>
	
	
	
	
	<!-- 获取一篇文章信息，不带内容 -->
	<!-- 参数:aid -->
	<!-- 返回字段:aid,kw,desc,thumb,title,date -->
	<row_nocontent>
		SELECT
		  `sid`,
		  `kw`,
		  `desc`,
		  `thumb`,
		  `title`,
		  `date`
		FROM `data_article`
		WHERE `data_article`.`sid` = :aid
	</row_nocontent>
	
	<!-- 根据病种ID获取精华文章AID -->
	<!-- 参数:did,length -->
	<!-- 返回字段:aid -->
	<getEssenceAidByDid>
		SELECT `data_article_dis`.`aid` FROM `data_article_dis`
			WHERE `data_article_dis`.`aid` IN (
				SELECT `aid` FROM `data_article_tags` WHERE `data_article_tags`.`tid` = 8
			) AND `data_article_dis`.`did` = :did
			LIMIT 0,:length
	</getEssenceAidByDid>
	
	
	<!-- 获取所有写这篇文章的医生ID -->
	<!-- 参数:aid -->
	<!-- 返回字段:dod -->
	<!-- 
	<getAuthors_byaid>
		SELECT `dod`
			FROM `data_article_doc`
			WHERE `aid`=:aid
	</getAuthors_byaid>
	 -->
	
	
	<!-- 获取一篇带THUMBNAIL文章 -->
	<!-- 参数:did -->
	<!-- 返回字段:aid,kw,desc,thumb,title,date -->
	<row_thumb_did>
		SELECT 
			`data_article`.`sid` as `aid`,
			`data_article`.`kw`,
			`data_article`.`desc`,
			`data_article`.`thumb`,
			`data_article`.`title`,
			`data_article`.`date`
			FROM `data_article_dis`
			LEFT JOIN `data_article` ON `data_article`.`sid` = `data_article_dis`.`aid`
			WHERE 
			`data_article_dis`.`did` = :did
			AND
			`data_article`.`thumb` IS NOT NULL 
			ORDER BY `aid` DESC 
			LIMIT 0,1
	</row_thumb_did>

	<!-- 获取病种下所有文章,按从新到旧的排序方式 -->
	<!-- 参数:did,length -->
	<!-- 返回字段:aid,kw,desc,thumb,title,date -->
	<allByDid>
		SELECT 
			`data_article`.`sid` as `aid`,
			`data_article`.`kw`,
			`data_article`.`desc`,
			`data_article`.`thumb`,
			`data_article`.`title`,
			`data_article`.`date`
			FROM `data_article_dis`
			LEFT JOIN `data_article` ON `data_article`.`sid` = `data_article_dis`.`aid`
			WHERE 
			`data_article_dis`.`did` = :did
			ORDER BY `aid` DESC
			LIMIT 0,:length
	</allByDid>
	
	
	<!-- 获取病种不包括传递的AID的所有文章,按从新到旧的排序方式 -->
	<!-- 参数:did,exc,length -->
	<!-- 返回字段:aid,kw,desc,thumb,title,date -->
	<allByDid_Exc>
		SELECT 
			`data_article`.`sid` as `aid`,
			`data_article`.`kw`,
			`data_article`.`desc`,
			`data_article`.`thumb`,
			`data_article`.`title`,
			`data_article`.`date`
			FROM `data_article_dis`
			LEFT JOIN `data_article` ON `data_article`.`sid` = `data_article_dis`.`aid`
			WHERE 
			`data_article_dis`.`did` = :did
			AND
			`data_article`.`sid` != :exc
			ORDER BY `aid` DESC
			LIMIT 0,:length
	</allByDid_Exc>
	
	
</ui_article>